---
- name: "Create Hot-board resources directory"
  file: path=/opt/hot-board/imagery state=directory mode=0755
- name: "Create Hot-board conf directory"
  file: path=/etc/hot-board state=directory mode=0755
- name: Copy Hot-board docker-compose file
  copy: src=hot-board.yml dest=/opt/hot-board/hot-board.yml
- name: Copy hot-board service
  copy: src=hot-board.service dest=/etc/systemd/system/hot-board.service
- name: Copy Hot-board docker image opendronemapd
  copy: src=opendronemapd/ dest=/opt/hot-board/opendronemapd/ directory_mode=0755
- name: Copy Hot-board docker images gdal2tiles
  copy: src=gdal2tiles/ dest=/opt/hot-board/gdal2tiles/ directory_mode=0755
- name: Build docker image for opendronemapd
  shell: docker build -t hot-board/opendronemapd /opt/hot-board/opendronemapd
- name: Build docker image for gdal2tiles
  shell: docker build -t hot-board/gdal2tiles /opt/hot-board/gdal2tiles
- name: Build docker image for Hot-board Api
  shell: docker build -t hot-board/hot-board-api /vagrant/api
- name: Assign rights to services
  shell: chmod 755 -R /etc/systemd/system
